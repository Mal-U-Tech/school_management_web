<ng-container *ngIf="class$ | async as class">
  <app-content>
    <div class="tw-flex tw-items-center">
      <h1 class="title">{{ class.name }}</h1>

      <button mat-icon-button [matMenuTriggerFor]="general" class="tw-ml-auto">
        <mat-icon color="primary">more_vert</mat-icon>
      </button>
    </div>

    <hr class="tw-mb-6" />

    <div class="subjects">
      <h2>Subjects</h2>
      <app-panel>
        <div class="tw-m-6">
          <table mat-table [dataSource]="class?.subjects ?? []">
            <ng-container matColumnDef="options">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let subject">
                <button mat-icon-button [matMenuTriggerFor]="menu">
                  <mat-icon color="primary">more_horizontal</mat-icon>
                </button>

                <mat-menu #menu>
                  <button mat-menu-item (click)="remove(class, subject)" class="warn"><mat-icon color="warn">delete</mat-icon> Remove</button>
                </mat-menu>
              </td>
            </ng-container>

            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let subject" class="tw-capitalize">
                {{ subject.name }}
              </td>
            </ng-container>

            <ng-container matColumnDef="remove">
              <th mat-header-cell *matHeaderCellDef></th>
              <td mat-cell *matCellDef="let subject">
                <button mat-icon-button [matTooltip]="gettooltip(class, subject)" (click)="remove(class, subject)">
                  <mat-icon color="warn">delete</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="subject_columns"></tr>
            <tr mat-row *matRowDef="let row; columns: subject_columns"></tr>
          </table>
        </div>
      </app-panel>
    </div>
  </app-content>

  <mat-menu #general>
    <button mat-menu-item (click)="changename(class)" class="primary"><mat-icon color="primary">edit</mat-icon> Change Name</button>
  </mat-menu>
</ng-container>
